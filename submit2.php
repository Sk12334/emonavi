<?php
$host = 'localhost';
$db = 'mental_health';
$user = 'root';
$pass = '';

// कनेक्शन बनाएं
$conn = new mysqli($host, $user, $pass, $db);

// कनेक्शन की जाँच करें
if ($conn->connect_error) {
    die("कनेक्शन विफल: " . $conn->connect_error);
}

// उपयोगकर्ता इनपुट प्राप्त करें
$username = $_POST['username'];
$q1 = $_POST['q1'];
$q2 = $_POST['q2'];
$q3 = $_POST['q3'];
$q4 = $_POST['q4'];
$q5 = $_POST['q5'];
$q6 = $_POST['q6'];
$q7 = $_POST['q7'];
$q8 = $_POST['q8'];
$q9 = $_POST['q9'];
$q10 = $_POST['q10'];
$q11 = $_POST['q11'];
$q12 = $_POST['q12'];
$q13 = $_POST['q13'];
$q14 = $_POST['q14'];

// मूड और व्यक्तित्व स्कोर की गणना करें
$mood_score = intval($q1) + intval($q2) + intval($q3) + intval($q4) + intval($q5)+intval($q9) + intval($q10) + intval($q11) + intval($q12)+intval($q13) + intval($q14);
$personality_score = intval($q1) + intval($q2) + intval($q3) + intval($q4) + intval($q5)+intval($q9) + intval($q10) + intval($q11) + intval($q12)+intval($q13) + intval($q14);

// तैयार करें और बाइंड करें
$stmt = $conn->prepare("INSERT INTO user_responses (username, mood_score, personality_score) VALUES (?, ?, ?)");
$stmt->bind_param("sii", $username, $mood_score, $personality_score);

// स्टेटमेंट को निष्पादित करें
if ($stmt->execute()) {
    // स्कोर के आधार पर मूड निर्धारित करें
    $mood = '';
    $suggestion = '';

    // मूड स्कोर के आधार पर मूड मूल्यांकन
    if ($mood_score <= 15) {
        $mood = 'उदास'; 
        $suggestion = "किसी पर भरोसा करने वाले व्यक्ति से संपर्क करने पर विचार करें। यह महत्वपूर्ण है कि आप अपनी भावनाओं के बारे में बात करें।";
    } elseif ($mood_score >=15 && $mood_score<=25) {
        $mood = 'तनाव में'; 
        $suggestion = "एक ब्रेक लें और कुछ ऐसा करें जो आपको पसंद है। एक छोटी सी सैर या ध्यान मदद कर सकता है।";
    } elseif ($mood_score >=26 && $mood_score<=35) {
        $mood = 'चिंतित'; 
        $suggestion = "कुछ श्वसन व्यायाम का अभ्यास करें। यह आपके मन को शांत करने का एक अच्छा तरीका है।";
    } elseif ($mood_score >=36 && $mood_score<=45) {
        $mood = 'उदास'; 
        $suggestion = "कोशिश करें कि आप अपनी भावनाओं को रचनात्मक रूप से व्यक्त करें। शारीरिक गतिविधि क्रोध को दूर करने में मदद कर सकती है।";
    } elseif ($mood_score >=46 && $mood_score<=55) {
        $mood = 'खुश'; 
        $suggestion = "अपनी सकारात्मकता दूसरों के साथ साझा करें! उन गतिविधियों में संलग्न हों जो आपको प्रोत्साहित करती हैं।";
    } else {
        $mood = 'अति उत्साहित'; 
        $suggestion = "इस भावना को अपनाएं! नए लक्ष्यों को निर्धारित करने या दूसरों की मदद करने का प्रयास करें।";
    }

    // व्यक्तित्व लक्षणों के आधार पर सुझावों में संशोधन करें
    if ($personality_score >= 10) {
        $suggestion .= " आप महान सकारात्मकता और अनुकूलनशीलता दिखा रहे हैं। सामाजिक गतिविधियों में शामिल रहना जारी रखें!";
    } else {
        $suggestion .= " यह मदद कर सकता है कि आप सामाजिक इंटरैक्शन पर ध्यान केंद्रित करें। किसी समूह या कक्षा में शामिल होने पर विचार करें।";
    }

    // व्यक्तिगत प्रश्नों के आधार पर व्यक्तित्व लक्षण निर्धारित करें
    $traits = [];
    if ($q1 == 0) {
        $traits[] = "नए रुचियों या करियर के रास्तों का पता लगाने पर विचार करें जो आपको उत्साहित करें; यह सोचने के लिए विचार करें कि आपको वास्तव में क्या प्रेरित करता है।";
    } else if ($q1 == 1) {
        $traits[] = "कोशिश करें कि आप अपने काम के उन पहलुओं की पहचान करें जो आपको पसंद हैं; छोटे परिवर्तन आपके जुनून को फिर से जगाने और आपके कार्यों को अधिक संतोषजनक बनाने में मदद कर सकते हैं।";
    } else if ($q1 == 2) {
        $traits[] = "आप कभी-कभी जुनून का अनुभव करते हैं, जो महान है! उन क्षणों पर ध्यान केंद्रित करें जो आपको प्रेरित करते हैं और उन्हें अपनी दैनिक दिनचर्या में बढ़ाने के तरीके खोजें।";
    } else if ($q1 == 3) {
        $traits[] = "आप एक अच्छे रास्ते पर हैं! विचार करें कि आपके रुचियों के साथ मेल खाने वाले प्रोजेक्ट्स का पता लगाने पर विचार करें ताकि आपके जुनून को और बढ़ावा मिल सके और आपके नौकरी संतोष को बढ़ाया जा सके।";
    } else if ($q1 == 4) {
        $traits[] = "आपकी उत्साहीता एक संपत्ति है! इस जुनून को पोषित करना जारी रखें, नए चुनौतियों का सामना करें और दूसरों के साथ अपनी प्रेरणा साझा करें ताकि उन्हें भी प्रेरित कर सकें।";
    }
    
    if ($q2 == 0) {
        $traits[] = "यह ठीक है कि आप अकेले रहना पसंद करते हैं; यह विचार करने पर विचार करें कि सामाजिक इंटरैक्शन असहज क्यों लगते हैं, और धीरे-धीरे दबाव रहित वातावरण में शामिल होने का प्रयास करें।";
    } else if ($q2 == 1) {
        $traits[] = "हालांकि आप अक्सर सामाजिक स्थितियों की तलाश नहीं करते हैं, खुद को चुनौती देने का प्रयास करें कि आप कभी-कभी कार्यक्रमों या समारोहों में भाग लें ताकि अपनी नेटवर्क को अपने ही गति से विस्तारित किया जा सके।";
    } else if ($q2 == 2) {
        $traits[] = "आप निश्चित संदर्भों में लोगों से मिलना पसंद करते हैं। ऐसे सामाजिक अवसर खोजने पर ध्यान केंद्रित करें जो आपके रुचियों के साथ मेल खाते हैं ताकि इंटरैक्शन को अधिक आनंदमय बनाया जा सके।";
    } else if ($q2 == 3) {
        $traits[] = "आपका संतुलन अच्छा है! अपने सामाजिक पक्ष को अपनाएं और उन क्लबों या समूहों में शामिल होने पर विचार करें जो आपके जुनून के साथ मेल खाते हैं ताकि समान विचारधारा वाले व्यक्तियों से मिल सकें।";
    } else if ($q2 == 4) {
        $traits[] = "नए लोगों से मिलने के प्रति आपका उत्साह एक अद्भुत गुण है! विविध सामाजिक अनुभवों और नेटवर्किंग अवसरों की खोज जारी रखें ताकि आप अपने संबंधों को समृद्ध कर सकें।";
    }

    if ($q3 == 0) {
        $traits[] = "ऐसा लगता है कि आप तनाव, चिंता, या अस्वस्थ आदतों से जूझ रहे हैं, जो बेहतर आत्म-देखभाल और भावनात्मक समर्थन की आवश्यकता को दर्शाते हैं।";
    } else if ($q3 == 1) {
        $traits[] = "ऐसा लगता है कि आप तनाव या भारी विचारों को प्रबंधित करने में संघर्ष कर रहे हैं, जो बेहतर नींद के लिए विश्राम तकनीकों और सहायक वातावरण की आवश्यकता को दर्शाता है।";
    } else if ($q3 == 2) {
        $traits[] = "आप तनाव के लिए एक संतुलित दृष्टिकोण रखते हैं लेकिन अपने नींद के वातावरण और दिनचर्या को अनुकूलित करने से समग्र कल्याण में सुधार हो सकता है।";
    } else if ($q3 == 3) {
        $traits[] = "आप संभवतः जीवन के प्रति सकारात्मक दृष्टिकोण रखते हैं, प्रभावी तनाव प्रबंधन और अच्छी भावनात्मक लचीलापन दिखाते हैं।";
    } else if ($q3 == 4) {
        $traits[] = "आप आत्म-देखभाल, अनुशासन, भावनात्मक लचीलापन, और सकारात्मक दृष्टिकोण को बनाए रखते हैं, जो स्वस्थ जीवनशैली विकल्पों और मजबूत सामाजिक संबंधों को दर्शाता है।";
    }

    if ($q4 == 0) {
        $traits[] = "अपने कार्यों के दूसरों पर प्रभाव के बारे में सोचने पर विचार करें; सहानुभूति विकसित करना मजबूत रिश्तों और एक अधिक सहायक वातावरण की ओर ले जा सकता है।";
    } else if ($q4 == 1) {
        $traits[] = "सक्रिय रूप से सुनने का अभ्यास करने और दूसरों से यह पूछने पर विचार करें कि वे कैसा महसूस करते हैं; विचारशीलता के छोटे इशारे आपके संबंधों में बहुत दूर तक जा सकते हैं।";
    } else if ($q4 == 2) {
        $traits[] = "आप कभी-कभी विचारशीलता दिखाते हैं, जो महान है! अपनी इंटरैक्शन में अधिक जागरूक रहने का प्रयास करें, क्योंकि छोटी-छोटी दयालुता के कार्य सद्भाव को बढ़ावा दे सकते हैं।";
    } else if ($q4 == 3) {
        $traits[] = "आपके लिए दूसरों की भावनाओं के प्रति जागरूक होना सराहनीय है! इस गुण को बनाए रखने की कोशिश करें और विचार करें कि आप अधिक खुले तरीके से अपनी समर्थन को कैसे व्यक्त कर सकते हैं।";
    } else if ($q4 == 4) {
        $traits[] = "आपके द्वारा दूसरों की मजबूत विचारशीलता एक मूल्यवान मित्र और सहकर्मी बनाती है! उदाहरण पेश करना जारी रखें और दूसरों को भी सहानुभूति रखने के लिए प्रेरित करें।";
    }
    
    if ($q5 == 0) {
        $traits[] = "";
    } else if ($q5 == 1) {
        $traits[] = "";
    } else if ($q5 == 2) {
        $traits[] = "";
    } else if ($q5 == 3) {
        $traits[] = "";
    } else if ($q5 == 4) {
        $traits[] = "";
    }

    if ($q9 == 0) {
        $traits[] = "कृतज्ञता के अभ्यास या माइंडफुलनेस का अभ्यास करने पर विचार करें ताकि आपकी दृष्टिकोण को बदल सकें और आपके दैनिक जीवन में सकारात्मकताओं को पहचान सकें।";
    } else if ($q9 == 1) {
        $traits[] = "हर दिन छोटे-छोटे जीत या सकारात्मक क्षणों की पहचान करने की कोशिश करें; उनके बारे में लिखना एक अधिक आशावादी दृष्टिकोण को विकसित करने में मदद कर सकता है।";
    } else if ($q9 == 2) {
        $traits[] = "जब नकारात्मक विचार उठें, तो उन पर ध्यान केंद्रित करें। उन गतिविधियों में संलग्न हों जो सकारात्मकता को प्रेरित करती हैं, जैसे प्रेरणादायक किताबें पढ़ना या सहायक लोगों के साथ रहना।";
    } else if ($q9 == 3) {
        $traits[] = "इस सकारात्मक मानसिकता को बनाए रखने के लिए दूसरों के साथ अपने दृष्टिकोण को साझा करें, जो आपके दृष्टिकोण को मजबूत कर सकती है और आसपास के लोगों को प्रेरित कर सकती है।";
    } else if ($q9 == 4) {
        $traits[] = "सकारात्मकता को लगातार देखने की आपकी क्षमता एक मूल्यवान गुण है; दूसरों को प्रेरित करने के लिए अपने विचारों और रणनीतियों को साझा करने पर विचार करें।";
    }

    if ($q10 == 0) {
        $traits[] = "आत्म-स्वीकृति के लाभों के बारे में विचार करने पर विचार करें; अपूर्णताओं को स्वीकार करना व्यक्तिगत विकास और तनाव में कमी की ओर ले जा सकता है।";
    } else if ($q10 == 1) {
        $traits[] = "आत्म-दया का अभ्यास करने में मदद हो सकती है; याद रखें कि हर कोई गलतियाँ करता है, और उनसे सीखना जीवन का हिस्सा है।";
    } else if ($q10 == 2) {
        $traits[] = "आप सही दिशा में हैं! अपने दोषों को नियमित रूप से अपनाने की कोशिश करें, क्योंकि इससे आपकी आत्मविश्वास और लचीलापन बढ़ सकता है।";
    } else if ($q10 == 3) {
        $traits[] = "आपके दोषों को स्वीकारने की क्षमता परिपक्वता दिखाती है। इस अभ्यास को जारी रखें और दूसरों को प्रोत्साहित करें कि वे गलतियों को विकास के अवसरों के रूप में देखें।";
    } else if ($q10 == 4) {
        $traits[] = "आपकी मजबूत स्वीकृति एक शक्तिशाली संपत्ति है! इस मानसिकता का उपयोग करें ताकि आप उन लोगों को प्रेरित कर सकें जो आपके चारों ओर हैं और प्रामाणिकता और समर्थन का वातावरण बना सकें।";
    }

    if ($q11 == 4) {
        $traits[] = "आपका सोचने की क्षमता सराहनीय है; नए अनुभवों के प्रति भी खुला रहने का प्रयास करें।";
    } else if ($q11 == 3) {
        $traits[] = "आप अच्छा संतुलन बनाते हैं! कभी-कभी स्पॉन्टेनिटी को अपनाने पर विचार करें, क्योंकि यह रोमांचक अवसरों की ओर ले जा सकता है।";
    } else if ($q11 == 2) {
        $traits[] = "आप निर्णय लेने से पहले रुकने से लाभान्वित हो सकते हैं; यह आपको लाभ और हानि को तौलने में मदद कर सकता है और संभावित पछतावे को कम कर सकता है।";
    } else if ($q11 == 1) {
        $traits[] = "हालांकि स्पॉन्टेनिटी मजेदार हो सकती है, अपने निर्णयों के परिणामों का मूल्यांकन करने की कोशिश करें; इससे बेहतर परिणाम मिल सकते हैं और तनाव कम हो सकता है।";
    } else if ($q11 == 0) {
        $traits[] = "आपकी आत्म-नियंत्रण की कमी रोमांच ला सकती है, लेकिन इसके संभावित नुकसान के प्रति सतर्क रहें। सुनिश्चित करें कि आप सही संतुलन बनाए रखने के लिए जोखिमों का मूल्यांकन करने की रणनीतियाँ विकसित करें।";
    }
    
    if ($q12 == 4) {
        $traits[] = "आपकी निस्वार्थता सराहनीय है! दूसरों की मदद करते रहिए क्योंकि यह आपके जीवन और उनके जीवन को समृद्ध करता है।";
    } else if ($q12 == 3) {
        $traits[] = "आपके पास एक मजबूत निस्वार्थता है, लेकिन कभी-कभी आप आपसी लाभ की तलाश करना ठीक है। अपनी जरूरतों के साथ दानशीलता को संतुलित करना संतोषजनक संबंधों की ओर ले जा सकता है।";
    } else if ($q12 == 2) {
        $traits[] = "आप reciprocity के महत्व को समझते हैं, लेकिन उन क्षणों पर विचार करें जब दूसरों की सहायता करना आपको अप्रत्याशित लाभ ला सकता है।";
    } else if ($q12 == 1) {
        $traits[] = "जबकि मदद करते समय कुछ लाभ की खोज करना व्यावहारिक हो सकता है, विचार करें कि बिना किसी अपेक्षा के सहायता करने से संबंध और व्यक्तिगत संतोष गहरा हो सकता है।";
    } else if ($q12 == 0) {
        $traits[] = "आपका दृष्टिकोण आपके हितों की सेवा कर सकता है, लेकिन विचार करें कि बिना किसी अपेक्षा के दूसरों की मदद करने का मूल्य कितना है; यह अधिक वास्तविक संबंध और व्यक्तिगत संतोष की ओर ले जा सकता है।";
    }

    if ($q13 == 1) {
        $traits[] = "आपके लिए रिश्तों को महत्व देना बहुत अच्छा है! कनेक्शन को पोषित करना एक अधिक संतोषजनक जीवन की ओर ले जाता है, क्योंकि सहायक मित्रता और परिवार के बंधन अक्सर वित्तीय सफलता से अधिक स्थायी खुशी प्रदान करते हैं।";
    } else {
        $traits[] = "हालांकि वित्तीय सुरक्षा महत्वपूर्ण है, लेकिन रिश्तों को प्राथमिकता देने से आपका जीवन कैसे समृद्ध हो सकता है, इस पर विचार करें। दोनों का संतुलन समग्र संतोष और कल्याण की ओर ले जा सकता है।";
    }

    if ($q14 == 1) {
        $traits[] = "यह अद्भुत है! यह दिखाता है कि आपके पास एक सकारात्मक मानसिकता और प्रभावी मुकाबला रणनीतियाँ हैं। इस दृष्टिकोण को बनाए रखें! आपकी तनाव के खिलाफ शांत रहने की क्षमता एक मूल्यवान ताकत है।";
    } else {
        $traits[] = "ऐसा महसूस करना ठीक है! इसे पहचानना पहला कदम है। तनाव प्रबंधन में मदद के लिए माइंडफुलनेस या गहरी सांस लेने जैसी तकनीकों का पता लगाने पर विचार करें।";
    }

    // एक स्टाइल्ड प्रारूप में प्रतिक्रिया प्रदर्शित करें
    echo "
    <!DOCTYPE html>
    <html lang='hi'>
    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <title>आपके मूड परिणाम</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                background-color: #f9f9f9;
                color: #333;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
                height: 100vh;
                padding: 20px;
            }
            .result-container {
                background-color: rgba(255, 239, 204, 0.9);
                border-radius: 15px;
                padding: 40px;
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
                width: 1000px;
                text-align: center;
                margin-bottom: 20px;
            }
            h1 {
                color: #FF6F61; 
                margin-bottom: 20px;
            }
            p {
                font-size: 18px;
                margin: 10px 0;
            }
            .mood-score {
                font-size: 24px;
                font-weight: bold;
                color: #FFABAB; 
                margin: 20px 0;
            }
            .suggestion {
                background-color: #E0F7FA; 
                border: 2px solid #4DB6AC; 
                padding: 10px;
                margin-top: 20px;
                border-radius: 5px;
                text-align: left;
            }
            .traits {
                margin-top: 20px;
                text-align: left;
            }
            .button {
                display: inline-block;
                background-color: #FFB3BA; 
                color: white;
                padding: 12px 20px;
                border: none;
                border-radius: 5px;
                text-decoration: none;
                margin-top: 20px;
                transition: background-color 0.3s;
            }
            .button:hover {
                background-color: #FF9999; 
            }
        </style>
    </head>
    <body>
        <div class='result-container'>
            <h1>धन्यवाद, $username!</h1>
            <p>आपका मूड स्कोर है: <span class='mood-score'>$mood_score</span></p>
            <p>आपका वर्तमान मूड है: <strong>$mood</strong></p>
            <div class='suggestion'>
                <h3>सुझाव:</h3>
                <p>$suggestion</p>
            </div>
            <div class='traits'>
                <h3>आपके व्यक्तित्व के गुण:</h3>
                <ul>";
    foreach ($traits as $trait) {
        echo "<li>$trait</li>";
    }
    echo "      </ul>
            </div>
            <a href='index2.php' class='button'>फिर से क्विज़ लें</a>
        </div>
        
        <h2>कुछ समाधानों के लिए नीचे क्लिक करें:</h2>";

    // प्रत्येक मूड के लिए अतिरिक्त संसाधनों (URLs) को परिभाषित करें
    $moodResources = [
        'Depressed' => 'depressedh.php',
        'Stressed' => 'stressh.php',
        'Anxious' => 'anxioush.php',
        'Sad' => 'sadh.php',
        'Happy' => 'happyh.php',
        'Ecstatic' => 'resources/ecstatic_resources.php',
    ];

    // प्रत्येक मूड के लिए लिंक जनरेट करें
    if (array_key_exists($mood, $moodResources)) {
        $resourceLink = $moodResources[$mood];
        echo "<a href='$resourceLink' class='button'>$mood के लिए समाधान देखें</a>";
    } else {
        echo "<p>आपके मूड के लिए कोई समाधान उपलब्ध नहीं है।</p>";
    }

    echo "
        </body>
    </html>
    ";
} else {
    echo "त्रुटि: " . $stmt->error;
}

// कनेक्शन बंद करें
$stmt->close();
$conn->close();
?>
